<div class="row py-2 shadow bg-white {{containerClass}}">
    <div class="col d-flex gap-2">
        <div class="flex-grow-1 d-flex flex-wrap align-items-center gap-4">
            <div class="flex-shrink-0">
                <svg fill="#000000" height="32" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M36 150.726c0 .703.982 1.274 2.201 1.274h7.598c1.216 0 2.201-.565 2.201-1.274v-37.452c0-.703-.982-1.274-2.201-1.274h-7.598c-1.216 0-2.201.565-2.201 1.274m20 55.273c0 1.355.982 2.453 2.201 2.453h7.598c1.216 0 2.201-1.088 2.201-2.453V96.453C68 95.098 67.018 94 65.799 94h-7.598C56.985 94 56 95.088 56 96.453m19 56.273c0 .703.982 1.274 2.201 1.274h7.598c1.216 0 2.201-.565 2.201-1.274v-37.452c0-.703-.982-1.274-2.201-1.274h-7.598c-1.216 0-2.201.565-2.201 1.274m19 30.77c0 .528.982.956 2.201.956h7.598c1.216 0 2.201-.424 2.201-.956v-28.088c0-.528-.982-.956-2.201-.956h-7.598c-1.216 0-2.201.424-2.201.956m20 54.304c0 1.513.982 2.74 2.201 2.74h7.598c1.216 0 2.201-1.216 2.201-2.74V91.74c0-1.513-.982-2.74-2.201-2.74h-7.598c-1.216 0-2.201 1.216-2.201 2.74m19 106.8c0 2.463.982 4.46 2.201 4.46h7.598c1.216 0 2.201-1.98 2.201-4.46V67.46c0-2.463-.982-4.46-2.201-4.46h-7.598c-1.216 0-2.201 1.98-2.201 4.46m19 116.036c0 1.935.982 3.504 2.201 3.504h7.598c1.216 0 2.201-1.555 2.201-3.504V80.504c0-1.935-.982-3.504-2.201-3.504h-7.598c-1.216 0-2.201 1.555-2.201 3.504m19 89.947c0 1.408.982 2.549 2.201 2.549h7.598c1.216 0 2.201-1.13 2.201-2.549V95.55c0-1.408-.982-2.549-2.201-2.549h-7.598c-1.216 0-2.201 1.13-2.201 2.549m19 62.698c0 .967.982 1.752 2.201 1.752h7.598c1.216 0 2.201-.777 2.201-1.752v-51.496c0-.967-.982-1.752-2.201-1.752h-7.598c-1.216 0-2.201.777-2.201 1.752m19 73.062c0 1.76.982 3.186 2.201 3.186h7.598c1.216 0 2.201-1.414 2.201-3.186V86.186c0-1.76-.982-3.186-2.201-3.186h-7.598c-1.216 0-2.201 1.414-2.201 3.186"
                        fill-rule="evenodd" />
                </svg>
            </div>

            <div class="d-flex gap-2 align-item-center px-sm-3">
                <button type="button" class="btn btn-outline-primary btn-sm p-1 p-sm-2" routerLink="/dashboard"
                    routerLinkActive="bg-primary text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="d-block">
                        <path d="M12 9a3.02 3.02 0 0 0-3 3c0 1.642 1.358 3 3 3s3-1.358 3-3-1.359-3-3-3"
                            fill="currentColor" />
                        <path
                            d="M12 5c-7.633 0-9.927 6.617-9.948 6.684L1.946 12l.105.316C2.073 12.383 4.367 19 12 19s9.927-6.617 9.948-6.684l.106-.316-.105-.316C21.927 11.617 19.633 5 12 5m0 12c-5.351 0-7.424-3.846-7.926-5C4.578 10.842 6.652 7 12 7c5.351 0 7.424 3.846 7.926 5-.504 1.158-2.578 5-7.926 5"
                            fill="currentColor" />
                    </svg>
                </button>

                <button type="button" class="btn btn-outline-primary btn-sm p-1 p-sm-2" routerLink="/dev"
                    routerLinkActive="bg-primary text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision"
                        text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd"
                        clip-rule="evenodd" width="20" height="20" viewBox="0 0 399 511.66" class="d-block">
                        <path fill-rule="nonzero" fill="currentColor"
                            d="M71.1 0h190.92c5.22 0 9.85 2.5 12.77 6.38L394.7 136.11c2.81 3.05 4.21 6.92 4.21 10.78l.09 293.67c0 19.47-8.02 37.23-20.9 50.14l-.09.08c-12.9 12.87-30.66 20.88-50.11 20.88H71.1c-19.54 0-37.33-8.01-50.22-20.9C8.01 477.89 0 460.1 0 440.56V71.1c0-19.56 8-37.35 20.87-50.23C33.75 8 51.54 0 71.1 0zm45.78 254.04c-8.81 0-15.96-7.15-15.96-15.95 0-8.81 7.15-15.96 15.96-15.96h165.23c8.81 0 15.96 7.15 15.96 15.96 0 8.8-7.15 15.95-15.96 15.95H116.88zm0 79.38c-8.81 0-15.96-7.15-15.96-15.96 0-8.8 7.15-15.95 15.96-15.95h156.47c8.81 0 15.96 7.15 15.96 15.95 0 8.81-7.15 15.96-15.96 15.96H116.88zm0 79.39c-8.81 0-15.96-7.15-15.96-15.96s7.15-15.95 15.96-15.95h132.7c8.81 0 15.95 7.14 15.95 15.95 0 8.81-7.14 15.96-15.95 15.96h-132.7zm154.2-363.67v54.21c1.07 13.59 5.77 24.22 13.99 31.24 8.63 7.37 21.65 11.52 38.95 11.83l36.93-.05-89.87-97.23zm96.01 129.11-43.31-.05c-25.2-.4-45.08-7.2-59.39-19.43-14.91-12.76-23.34-30.81-25.07-53.11l-.15-2.22V31.91H71.1c-10.77 0-20.58 4.42-27.68 11.51-7.09 7.1-11.51 16.91-11.51 27.68v369.46c0 10.76 4.43 20.56 11.52 27.65 7.11 7.12 16.92 11.53 27.67 11.53h256.8c10.78 0 20.58-4.4 27.65-11.48 7.13-7.12 11.54-16.93 11.54-27.7V178.25z" />
                    </svg>
                </button>
            </div>

            <div class="d-none d-md-flex gap-3 align-item-center px-3">
                <ng-container *ngTemplateOutlet="pickingEfficiency; context: {
                    $implicit: {
                        liveMetrics: liveMetrics,
                        machineStatus: machineStatus
                    }
                }"></ng-container>
            </div>

            <span class="text-danger d-none d-md-block">
                {{currentDateAndTime}}
            </span>
        </div>

        <div class="flex-shrink-0 d-flex gap-2 align-items-center">
            <div style="max-width: 250px;" class="flex-shrink-0 d-none d-sm-flex flex-column align-items-end">
                <small class="fw-bold m-0 lh-base">User name here...</small>
                <small class="m-0 lh-1">Address here..................</small>
            </div>

            <div style="width: 48px;" class="flex-shrink-0">
                <img class="img-thumbnail d-block" src="images/avatar.png" alt="Avatar">
            </div>
        </div>
    </div>

    <!-- for mobile view -->
    <div class="mt-3 d-block d-md-none">
        <div class="text-center">
            <small class="text-danger">
                {{currentDateAndTime}}
            </small>
        </div>

        <div class="d-block d-md-none text-center overflow-auto">
            <div class="d-inline-flex gap-3 align-items-center px-1">
                <ng-container *ngTemplateOutlet="pickingEfficiency; context: {
                    $implicit: {
                        liveMetrics: liveMetrics,
                        machineStatus: machineStatus
                    }
                }"></ng-container>
            </div>
        </div>
    </div>
</div>


<!-- picking efficiency template for reuse -->
<ng-template #pickingEfficiency let-data>
    <div class="d-flex gap-2">
        <div class="flex-shrink-0 d-flex flex-column text-center text-primary">
            <h4 class="m-0">
                {{data?.liveMetrics?.efficiency || '0'}}%
            </h4>
            <small>Efficiency</small>
        </div>
    </div>
    <div class="d-flex gap-2">
        <div class="flex-shrink-0 d-flex flex-column text-center text-primary">
            <h4 class="m-0">
                {{data?.liveMetrics?.pick ?? 0}}
            </h4>
            <small>Picks</small>
        </div>
    </div>
    <div class="d-flex gap-2">
        <div class="flex-shrink-0 d-flex flex-column text-center text-primary">
            <h4 class="m-0">
                {{data?.liveMetrics?.avgSpeed ?? 0}}
            </h4>
            <small>A.Picks</small>
        </div>
    </div>
    <div class="d-flex gap-2">
        <div class="flex-shrink-0 d-flex flex-column text-center text-primary">
            <h4 class="m-0">
                {{data?.liveMetrics?.avgPicks ?? 0}}
            </h4>
            <small>A.Speed</small>
        </div>
    </div>
    @if(data?.machineStatus) {
    @for (item of data.machineStatus; track item.key) {
    <div class="d-flex gap-2">
        <div class="flex-shrink-0 d-flex flex-column text-center text-primary c-pointer"
            [class.text-danger]="item === selectedMachineStatus" (click)="onSelectMachineStatus(item)">
            <h4 class="m-0">
                {{data?.liveMetrics?.[item?.key] ?? 0}}
            </h4>
            <small>
                {{item?.label}}
            </small>
        </div>
    </div>
    }
    }
</ng-template>