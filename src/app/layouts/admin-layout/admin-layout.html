<!-- Load component based on the current route -->
<div class="container-fluid">
    <div class="row flex-nowrap bg-light">


        <nav class="col-auto p-0 bg-white sidebar position-sticky top-0 p-0 border-end border-light shadow side-nav"
            [class.collapsed]="isSidebarCollapsed">
            <div class="side-nav-wrapper">
                <!-- Sidebar Header -->
                <div class="p-2 border-bottom text-center user-select-none side-nav-header"
                    (click)="isSidebarCollapsed = !isSidebarCollapsed">
                    <svg width="42" height="42" viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg"
                        style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"
                        class="brand-logo">
                        <g id="l6o3DLoabXeYvcMB0IhFtnn" transform="matrix(0.1,0,0,0.1,0,0)">
                            <g transform="matrix(1.56523,0,0,1.68911,-4957.84,-2630.41)">
                                <path
                                    d="M9260,12288C9022,12223 8909,12151 8704,11934C8374,11583 8171,11394 8009,11288C7800,11151 7411,10994 7145,10940C7031,10917 6823,10831 6733,10769C6610,10685 6457,10505 6381,10352C6305,10201 6225,9975 6186,9805C6100,9423 6098,8931 6181,8536C6303,7958 6592,7522 6960,7363C7058,7321 7112,7309 7231,7303C7443,7292 7637,7384 7845,7594C7966,7716 8022,7794 8098,7945C8192,8132 8273,8374 8300,8545C8305,8578 8316,8650 8325,8705C8355,8898 8347,9414 8309,9610C8292,9699 8258,9853 8250,9880C8245,9894 8231,9939 8219,9980C8207,10021 8193,10059 8188,10064C8184,10070 8180,10080 8180,10087C8180,10111 8056,10362 8005,10440C7958,10514 7908,10578 7840,10654C7801,10697 7678,10806 7640,10831C7626,10840 7618,10850 7621,10854C7631,10864 7842,10820 7909,10794C8159,10696 8369,10437 8514,10048C8554,9940 8611,9723 8628,9615C8634,9577 8644,9516 8650,9480C8671,9358 8674,9030 8656,8850C8647,8759 8635,8672 8631,8655C8626,8639 8617,8591 8610,8550C8592,8442 8565,8346 8502,8175C8385,7854 8173,7567 7905,7368C7861,7335 7824,7304 7822,7299C7820,7294 8708,7290 9969,7290C12087,7290 12122,7290 12213,7310C12567,7387 12875,7648 13067,8035C13184,8271 13235,8446 13292,8820C13309,8929 13309,9383 13292,9500C13261,9716 13239,9818 13190,9969C13119,10192 12974,10450 12839,10594C12779,10659 12772,10680 12812,10680C12823,10680 12851,10685 12874,10691C12896,10697 12933,10706 12955,10712C13035,10732 13177,10792 13265,10842C13423,10931 13548,11034 13870,11340C13972,11436 14107,11562 14170,11620C14233,11678 14375,11812 14487,11918C14715,12136 14728,12156 14694,12227C14682,12250 14662,12272 14640,12282C14607,12299 14459,12300 11950,12299C10295,12298 9282,12294 9260,12288ZM14073,11986C14069,11978 14012,11923 13948,11863C13883,11804 13713,11643 13569,11505C13204,11156 13085,11067 12868,10981C12764,10940 12689,10924 12530,10910C12353,10895 8138,10900 8133,10915C8131,10921 8141,10932 8154,10940C8247,10997 8629,11362 8776,11535C8813,11579 8847,11617 8850,11620C8853,11623 8889,11664 8929,11713C9024,11827 9102,11891 9209,11943L9295,11985L11675,11990C12984,11993 14061,11996 14068,11998C14077,11999 14078,11995 14073,11986ZM7302,10484C7454,10445 7604,10327 7713,10159C7862,9930 7935,9707 7990,9320C8003,9225 7998,8896 7981,8765C7953,8549 7899,8368 7807,8185C7593,7756 7261,7608 6961,7806C6739,7953 6534,8342 6470,8735C6464,8774 6454,8830 6448,8860C6433,8935 6434,9366 6449,9460C6486,9687 6548,9889 6624,10035C6750,10274 6876,10405 7044,10471C7128,10504 7206,10508 7302,10484Z"
                                    style="fill:rgb(4,58,84);fill-rule:nonzero;" />
                            </g>
                            <g transform="matrix(1.56523,0,0,1.68911,-4957.84,-2630.41)">
                                <path
                                    d="M7053,9965C6745,9869 6579,9324 6702,8810C6768,8534 6922,8345 7123,8290C7283,8247 7496,8364 7594,8549C7667,8689 7699,8823 7707,9030C7724,9495 7554,9873 7286,9963C7227,9983 7113,9984 7053,9965ZM7245,9576C7308,9539 7361,9450 7396,9325C7419,9243 7427,9005 7409,8931C7340,8631 7144,8567 7022,8805C6973,8903 6955,8988 6956,9130C6956,9289 6971,9366 7020,9464C7045,9514 7068,9545 7098,9568C7151,9607 7188,9609 7245,9576Z"
                                    style="fill:rgb(4,58,84);fill-rule:nonzero;" />
                            </g>
                            <g transform="matrix(1.56523,0,0,1.68911,-4957.84,-2630.41)">
                                <path
                                    d="M4338,11540C4318,11529 4293,11505 4281,11487C4261,11454 4260,11440 4260,11128C4260,10807 4260,10803 4283,10769C4324,10707 4351,10700 4567,10700L4758,10700L4758,8300L4757,5900L4566,5900C4352,5900 4326,5894 4283,5830L4260,5797L4260,5168C4260,4465 4256,4505 4332,4450L4373,4420L4970,4420L4970,3725C4970,2953 4967,2983 5035,2954C5064,2942 5262,2940 6325,2940L7582,2940L7640,2998L7640,4420L8103,4420C8594,4420 8718,4428 8789,4462C8846,4490 8946,4593 9024,4705L9086,4795L9530,4801C9844,4805 9986,4810 10013,4819C10100,4847 10159,4933 10160,5030C10160,5112 10143,5160 10096,5206C10025,5278 10005,5281 9545,5280L9145,5279L9139,5317C9134,5349 9117,5369 9040,5441L8948,5527L9052,5666C9284,5976 9801,6714 9844,6797C9866,6840 9864,6863 9837,6888C9789,6933 9775,6924 9593,6733C9501,6635 9371,6499 9305,6430C9192,6313 8717,5812 8585,5672C8552,5637 8518,5604 8508,5599C8495,5592 8465,5610 8377,5678C8047,5929 7033,6749 6580,7132C6539,7167 6377,7301 6220,7430C6063,7558 5854,7731 5756,7813C5657,7894 5568,7967 5558,7974C5541,7986 5540,8048 5538,9343L5535,10700L5977,10700L6010,10743C6065,10811 6148,10896 6265,11003C6326,11059 6381,11112 6388,11123C6398,11136 6401,11181 6400,11298C6399,11473 6392,11496 6330,11537L6297,11560L5336,11560C4406,11559 4374,11558 4338,11540ZM5608,7247C5645,7217 5855,7050 6075,6875C6602,6456 6598,6459 6725,6354C6786,6304 6891,6221 6960,6170C7029,6118 7137,6033 7200,5980C7431,5786 7773,5509 7866,5440C7884,5426 7900,5409 7900,5403C7900,5393 7657,5390 6720,5390L5540,5390L5540,6329C5540,6846 5537,7275 5534,7284C5524,7310 5537,7303 5608,7247ZM5838,3768L5835,3445L5695,3443C5618,3441 5551,3443 5545,3448C5539,3452 5536,3569 5538,3773L5541,4090L5840,4090L5838,3768ZM6465,4068C6468,4055 6469,3910 6468,3745L6465,3445L6326,3442C6233,3440 6183,3443 6174,3451C6163,3460 6160,3520 6160,3770C6160,3938 6163,4080 6167,4083C6170,4087 6238,4090 6316,4090C6457,4090 6460,4090 6465,4068ZM7088,4082C7097,4075 7100,4004 7098,3759L7095,3445L6948,3442L6800,3439L6800,3758C6800,3933 6803,4080 6807,4083C6816,4093 7072,4091 7088,4082Z"
                                    style="fill:rgb(4,58,84);fill-rule:nonzero;" />
                            </g>
                            <g transform="matrix(1.56523,0,0,1.68911,-4957.84,-2630.41)">
                                <path
                                    d="M13350,10147C13350,10145 13361,10123 13374,10099C13409,10037 13478,9870 13496,9802C13541,9640 13579,9412 13581,9293L13583,9200L14094,9200C14567,9200 14608,9198 14645,9181C14698,9157 14766,9082 14779,9032C14787,9004 14789,8318 14788,6732L14785,4472L14755,4429C14738,4405 14705,4372 14681,4355L14638,4325L12897,4322L11157,4320L11113,4341C11060,4366 11007,4427 10992,4479C10983,4507 10980,4856 10980,5803L10980,7090L10813,7086L10645,7082L10645,3985L10671,3908C10708,3800 10762,3709 10835,3632C10908,3554 10992,3501 11105,3463L11185,3435L14605,3435L14685,3458C14806,3493 14875,3534 14965,3625C15056,3715 15096,3787 15133,3923L15155,4005L15158,6715C15161,8727 15159,9446 15150,9505C15110,9780 14975,9977 14754,10081C14623,10144 14641,10142 13968,10147C13628,10150 13350,10150 13350,10147ZM13444,3998C13453,3986 13460,3960 13460,3940C13460,3920 13453,3894 13444,3882L13429,3860L12311,3860L12296,3882C12273,3915 12276,3969 12302,3997L12323,4020L13429,4020L13444,3998Z"
                                    style="fill:rgb(4,58,84);fill-rule:nonzero;" />
                            </g>
                            <g transform="matrix(1.56523,0,0,1.68911,-4957.84,-2630.41)">
                                <path
                                    d="M11598,7082L11421,7080L11464,7022C11487,6991 11576,6871 11660,6755C11745,6640 11893,6439 11990,6309C12086,6179 12180,6052 12197,6026C12257,5941 12298,5943 12445,6038C12495,6071 12657,6175 12805,6270C13187,6514 13258,6560 13271,6576C13281,6588 13291,6577 13325,6518C13368,6441 13508,6214 13692,5921C13774,5791 13798,5745 13788,5739C13781,5735 13756,5718 13733,5701C13663,5650 13651,5561 13708,5507C13741,5475 14197,5270 14235,5270C14270,5270 14316,5297 14329,5327C14344,5361 14344,5860 14329,5894C14314,5926 14257,5954 14222,5945C14207,5942 14171,5923 14143,5904C14114,5885 14087,5870 14082,5870C14077,5870 14064,5888 14052,5909C14031,5945 13798,6324 13541,6740C13485,6831 13427,6917 13412,6933C13376,6971 13329,6969 13259,6927C13126,6845 12756,6611 12558,6482L12342,6342L12322,6364C12306,6382 12168,6567 11939,6880C11909,6921 11865,6983 11842,7016C11820,7050 11795,7079 11788,7081C11781,7083 11695,7084 11598,7082Z"
                                    style="fill:rgb(93,143,74);fill-rule:nonzero;" />
                            </g>
                        </g>
                    </svg>
                    @if(!isSidebarCollapsed){
                    <span class="text-primary fs-4 fw-bold">
                        TrackWeaving
                    </span>
                    }
                </div>
                <!-- Navigation Menu -->
                <ul class="nav-menu-wrapper">
                    @for(item of sidebarRoutes; track item){
                    <li class="menu-item rounded" routerLinkActive="bg-primary">
                        <a class="text-decoration-none text-dark" routerLink="{{item.link}}">
                            <div class="d-flex gap-2 align-items-center py-2 px-3" routerLinkActive="text-white">
                                @switch (item.icon) {
                                @case('workspace'){
                                <svg fill="currentColor" width="24" height="24" viewBox="0 0 32 32"
                                    xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0">
                                    <g id="SVGRepo_iconCarrier">
                                        <path
                                            d="M16,17v8H6V17H16m0-2H6a2,2,0,0,0-2,2v8a2,2,0,0,0,2,2H16a2,2,0,0,0,2-2V17a2,2,0,0,0-2-2Z">
                                        </path>
                                        <path
                                            d="M27,6v5H17V6H27m0-2H17a2,2,0,0,0-2,2v5a2,2,0,0,0,2,2H27a2,2,0,0,0,2-2V6a2,2,0,0,0-2-2Z">
                                        </path>
                                        <path
                                            d="M27,17v5H22V17h5m0-2H22a2,2,0,0,0-2,2v5a2,2,0,0,0,2,2h5a2,2,0,0,0,2-2V17a2,2,0,0,0-2-2Z">
                                        </path>
                                        <path
                                            d="M11,6v5H6V6h5m0-2H6A2,2,0,0,0,4,6v5a2,2,0,0,0,2,2h5a2,2,0,0,0,2-2V6a2,2,0,0,0-2-2Z">
                                        </path>
                                    </g>
                                </svg>
                                }
                                @case('users'){
                                <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                                    class="flex-shrink-0">
                                    <path fill="currentColor"
                                        d="M20.69,12.24a10.74,10.74,0,0,1-1.52-.73,6.86,6.86,0,0,0,1.41-2.09A1.27,1.27,0,0,0,21,9a2.51,2.51,0,0,0,.32-2,1.61,1.61,0,0,0-.37-.6,7.46,7.46,0,0,0-.22-1.72,4.15,4.15,0,0,0-4.17-2.83,4.07,4.07,0,0,0-4,2.56,5.19,5.19,0,0,0-.71-.06c-.17,0-.32,0-.47,0a4.21,4.21,0,0,0-4-2.54A4.15,4.15,0,0,0,3.16,4.63a7.39,7.39,0,0,0-.22,1.72,1.61,1.61,0,0,0-.37.59A2.52,2.52,0,0,0,2.89,9a1.25,1.25,0,0,0,.39.43,8.12,8.12,0,0,0,1.44,2.09,12.6,12.6,0,0,1-1.56.73C.26,13.34.29,15.69.32,17.4a1.85,1.85,0,0,0,1.75,1.85H4a12.36,12.36,0,0,0-.17,1.51,2,2,0,0,0,.54,1.45,1.66,1.66,0,0,0,1.21.54H18.49a1.68,1.68,0,0,0,1.22-.55,1.94,1.94,0,0,0,.53-1.42,11.29,11.29,0,0,0-.2-1.53h1.74a1.85,1.85,0,0,0,1.75-1.85C23.55,15.69,23.59,13.34,20.69,12.24ZM14.55,7.51a6.21,6.21,0,0,1,.17,1.66.66.66,0,0,0,.46.73,1.32,1.32,0,0,1-.21.84,1,1,0,0,0-.45.56c-.16.55-1.27,2.68-2.68,2.68s-2.53-2.13-2.71-2.76a1.09,1.09,0,0,0-.44-.51c-.25-.48-.25-.77-.2-.81a.75.75,0,0,0,.47-.74,6.21,6.21,0,0,1,.17-1.66,2.64,2.64,0,0,1,2.72-1.72A2.61,2.61,0,0,1,14.55,7.51ZM2.07,17.75c-.08,0-.25-.18-.25-.37,0-1.87.08-3.05,1.87-3.73a15.32,15.32,0,0,0,2.73-1.4.75.75,0,0,0,0-1.26A6,6,0,0,1,4.62,8.74a.79.79,0,0,0-.41-.46c-.28-.52-.28-.83-.23-.87a.75.75,0,0,0,.46-.73A6.22,6.22,0,0,1,4.61,5,2.64,2.64,0,0,1,7.33,3.29,2.67,2.67,0,0,1,9.87,4.7,4,4,0,0,0,7.66,7.13a7.41,7.41,0,0,0-.22,1.71,1.6,1.6,0,0,0-.37.59,2.51,2.51,0,0,0,.32,2.05,1.23,1.23,0,0,0,.38.43A7.07,7.07,0,0,0,9.06,14a6.73,6.73,0,0,1-1.4.72,5.28,5.28,0,0,0-3.19,3Zm16.55,3.42a.22.22,0,0,1-.13.08H5.61a.2.2,0,0,1-.12-.07.47.47,0,0,1-.13-.33c.15-2.64,1-4,2.82-4.7A7.9,7.9,0,0,0,10.24,15a3.13,3.13,0,0,0,1.6.46,3.21,3.21,0,0,0,1.83-.62,8.81,8.81,0,0,0,2.25,1.23,3.85,3.85,0,0,1,2.35,2.34.71.71,0,0,0,0,.07.74.74,0,0,0,.2.49,9.18,9.18,0,0,1,.29,1.88A.43.43,0,0,1,18.62,21.17ZM22,17.38c0,.19-.17.37-.25.37H19.6a5.3,5.3,0,0,0-3.15-3.07,7.7,7.7,0,0,1-1.67-.87,7.17,7.17,0,0,0,1.11-1.89,1.28,1.28,0,0,0,.38-.45,2.56,2.56,0,0,0,.29-2.17,1.5,1.5,0,0,0-.34-.49A7.45,7.45,0,0,0,16,7.12a4,4,0,0,0-2-2.33,2.53,2.53,0,0,1,2.52-1.5A2.61,2.61,0,0,1,19.23,5a6.21,6.21,0,0,1,.17,1.66.8.8,0,0,0,.46.77,1.17,1.17,0,0,1-.19.78,1.17,1.17,0,0,0-.47.6,4.71,4.71,0,0,1-1.66,2.06.75.75,0,0,0-.13,1.29,13.59,13.59,0,0,0,2.75,1.48C21.94,14.32,22.05,15.51,22,17.38Z" />
                                </svg>
                                }
                                @case('machine'){
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                                    viewBox="10 10 108 108" class="flex-shrink-0">
                                    <rect width="32" height="32" x="26" y="70" stroke="currentColor" stroke-width="6"
                                        rx="9">
                                    </rect>
                                    <rect width="32" height="32" x="26" y="26" stroke="currentColor" stroke-width="6"
                                        rx="9">
                                    </rect>
                                    <rect width="32" height="32" x="70" y="70" stroke="currentColor" stroke-width="6"
                                        rx="9">
                                    </rect>
                                    <rect width="32" height="32" x="70" y="26" stroke="currentColor" stroke-width="6"
                                        rx="9">
                                    </rect>
                                </svg>
                                }
                                @case('apk'){
                                <svg fill="currentColor" width="24" height="24" viewBox="0 0 32 32"
                                    xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0">
                                    <path
                                        d="M22.43,22a0.5,0.5,0,0,0-.5.5v4.2H5.15V4.2a1.7,1.7,0,0,1,1.7-1.7H20.23a1.7,1.7,0,0,1,1.7,1.7v5a0.5,0.5,0,0,0,1,0v-5a2.7,2.7,0,0,0-2.7-2.7H6.85a2.7,2.7,0,0,0-2.7,2.7V27.8a2.7,2.7,0,0,0,2.7,2.7H20.23a2.7,2.7,0,0,0,2.7-2.7V22.5A0.5,0.5,0,0,0,22.43,22Zm-2.2,7.5H6.85a1.7,1.7,0,0,1-1.7-1.7V27.7H21.93v0.1A1.7,1.7,0,0,1,20.23,29.5Z" />
                                    <path
                                        d="M22.43,10.58A5.42,5.42,0,1,0,27.85,16,5.42,5.42,0,0,0,22.43,10.58Zm0,9.83A4.42,4.42,0,1,1,26.85,16,4.42,4.42,0,0,1,22.43,20.42Z" />
                                    <path
                                        d="M22.93,15.76V12.82a0.5,0.5,0,1,0-1,0V16a0.5,0.5,0,0,0,.19.39l2.22,1.73a0.5,0.5,0,0,0,.31.11A0.5,0.5,0,0,0,25,17.33Z" />
                                    <path d="M10.36,3.48a0.5,0.5,0,0,0,0,1h6.36a0.5,0.5,0,0,0,0-1H10.36Z" />
                                </svg>
                                }
                                }
                                <span class="text-capitalize fw-medium">
                                    {{item.label}}
                                </span>
                            </div>
                        </a>
                    </li>
                    }
                </ul>
                <!-- Sidebar Footer -->
                <div class="border-top side-nav-footer">
                    <button class="btn btn-outline-primary d-flex align-items-center gap-2 w-100" (click)="logout()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 14 14" fill="none"
                            class="flex-shrink-0">
                            <path
                                d="M5.25 12.25H2.91667C2.60725 12.25 2.3105 12.1271 2.09171 11.9083C1.87292 11.6895 1.75 11.3928 1.75 11.0833V2.91667C1.75 2.60725 1.87292 2.3105 2.09171 2.09171C2.3105 1.87292 2.60725 1.75 2.91667 1.75H5.25"
                                stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                stroke-linejoin="round" />
                            <path d="M9.33334 9.91671L12.25 7.00004L9.33334 4.08337" stroke="currentColor"
                                stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M12.25 7H5.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                        <span class="flex-grow-1">
                            Logout
                        </span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Body Section (Right) -->
        <main class="col m-0 p-0 h-100 overflow-auto">
            <router-outlet></router-outlet>
        </main>
    </div>
</div>